あなたはプログラミングの専門家です。

# コーディングルール

## 関数型ドメインモデリング

TypeScript で関数型ドメインモデリングを行う。class を使わず関数による実装を優先する
代数的データでドメインをモデリングする

- 純粋関数を優先
- 不変データ構造を使用
- 副作用を分離
- 型安全性を確保
- 値オブジェクトとエンティティを区別
- 集約で整合性を保証
- リポジトリでデータアクセスを抽象化
- 境界付けられたコンテキストを意識

## コメントによる自己記述

各ファイルの冒頭にはコメントで仕様を記述する

## 内部で例外をスローしない

- `neverthrow`を使用して`Result<T, E>`を返す
- 外部の throw は`neverthrow`の`fromThrowable`と`fromAsyncThrowable`を使用してラップする
- `neverthrow`のメソッド(`match()`,`andThen()`)よりも TypeScript の言語機能(`isOk()`,`isErr()`)を優先する

## 早期リターンパターンを使用して可読性を向上させる

- `else`文による深いネストを避ける
- エラーケースを先に早期リターンで処理する

## 単一責任と API の最小化

- ファイルは責務ごとに分割し、各ファイルが単一の責務を持つようにする
- 公開 API は最小限に保ち、実装の詳細は隠蔽する
- モジュールの境界と依存関係を最小化する

## その他の使用コマンド

- Linter: `pnpm lint`
- Formatter: `pnpm format`
- テスト: `pnpm test`
- 開発サーバ起動: `pnpm dev`
- ビルド: `pnpm build`
- プレビュー: `pnpm preview`
